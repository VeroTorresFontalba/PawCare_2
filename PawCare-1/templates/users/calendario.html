{% extends 'base.html' %}

{% block content %} 

{% load static %}
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js'></script>

{% comment %} {% for c in calendario %}
<td>{{c.fechaReserva}}</td>
<td>{{c.horaInicio}}</td>
<td>{{c.horaFin}}</td>
<td>{{c.estado}}</td>

{%endfor%} {% endcomment %}


<div class="container">
  
  <form action="#" method="POST">
    {% csrf_token %}

    {{ form.as_p }}
    <div class="d-grid">
      <button type="submit" class="btn btn-info">Registrar</button>
  </div>
  <br>

     

</form>

  <h2>Lista de horas para calendario</h2><br><br>
  <table class="table"> <br>
      <thead>
          <tr>
              <th>Fecha</th>
              <th>Hora Inicio</th>
              <th>Hora Fin</th>
              <th>Estado</th>

              {% comment %} <th>Estado</th>  {% endcomment %}
          </tr>
      </thead>
      <tbody>
        {% for c in calendario %}
          <tr>
            <td>{{c.fechaReserva}}</td>
            <td>{{c.horaInicio}}</td>
            <td>{{c.horaFin}}</td>
            <td>{{c.estado}}</td>
              {% comment %} <td>{{c.published}}</td> {% endcomment %}
              {% comment %} <td>
                {% if c.image %}
                <img src="{{c.image.url}}" width="100px" height="100px" alt="">
                {% endif %}
              </td> {% endcomment %}
              {% comment %} <td><a href="{% url 'admin_app:colaborador_modificar' c.id %}" class="btn btn-primary">Modificar</a></td> {% endcomment %}
              {% comment %} <td><a href="#" class="btn btn-danger">Eliminar</a></td> {% endcomment %}
          </tr>
          {%endfor%}
      </tbody>
  </table><br>
</div><br><br>



    <script>

      document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'dayGridMonth',
          locale:'es',
          headerToolbar:{
            left:'prev,next,today',
            center:'title',
            right:'dayGridMonth,timeGridWeek,listWeek',
          },
          events: [
            {% for c in calendario %}
              {
                title: "{{ c.estado }} / {{ c.horaInicio}} - {{ c.horaFin}}",
                start: '{{ c.fechaReserva  | date:"Y-m-d" }}',

              },
            {%endfor%}
          ]
            

        });
        calendar.render();
        calendar.setOptions('locale', 'es');

      });

    </script>


{% endblock %}